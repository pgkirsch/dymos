
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.4">
    
    
      
        <title>Defining ODEs - Dymos</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#defining-odes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Dymos" class="md-header__button md-logo" aria-label="Dymos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dymos
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Defining ODEs
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Dymos" class="md-nav__button md-logo" aria-label="Dymos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Dymos
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="collocation.html" class="md-nav__link">
        What is collocation?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="optimal_control.html" class="md-nav__link">
        Optimal Control
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Defining ODEs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="defining_odes.html" class="md-nav__link md-nav__link--active">
        Defining ODEs
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-options" class="md-nav__link">
    System Options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables-of-the-optimal-control-problem" class="md-nav__link">
    Variables of the Optimal Control Problem
  </a>
  
    <nav class="md-nav" aria-label="Variables of the Optimal Control Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-for-time" class="md-nav__link">
    Options for Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#states" class="md-nav__link">
    States
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-for-states" class="md-nav__link">
    Options for States
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controls" class="md-nav__link">
    Controls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-for-control" class="md-nav__link">
    Options for Control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-for-parameters" class="md-nav__link">
    Options for Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tagging-variables" class="md-nav__link">
    Tagging Variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-target-detection" class="md-nav__link">
    Automatic target detection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vectorizing-the-ode" class="md-nav__link">
    Vectorizing the ODE
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dimensioned-inputs-and-outputs" class="md-nav__link">
    Dimensioned Inputs and Outputs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-vector-inputs" class="md-nav__link">
    Non-Vector Inputs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providing-the-ode-to-the-phase" class="md-nav__link">
    Providing the ODE to the Phase
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="intro_to_dymos/intro_ivp.html" class="md-nav__link">
        Modeling Dynamic Systems with Dymos
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="intro_to_dymos/intro_segments.html" class="md-nav__link">
        Segments of Phases
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Examples and Tutorials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Examples and Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Examples and Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/examples.html" class="md-nav__link">
        Dymos by Example
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        Example Problems
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Example Problems" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Example Problems
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/brachistochrone/brachistochrone.html" class="md-nav__link">
        The Brachistochrone
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/vanderpol/vanderpol.html" class="md-nav__link">
        The Van der Pol Oscillator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/balanced_field/balanced_field.html" class="md-nav__link">
        Aircraft Balanced Field Length Calculation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/commercial_aircraft/commercial_aircraft.html" class="md-nav__link">
        Commercial Aircraft Range Maximization by Differential Inclusion
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/double_integrator/double_integrator.html" class="md-nav__link">
        Double Integrator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/hypersensitive/hypersensitive.html" class="md-nav__link">
        Hyper-Sensitive Problem
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/finite_burn_orbit_raise/finite_burn_orbit_raise.html" class="md-nav__link">
        Two-Burn Orbit Raise
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/length_constrained_brachistochrone/length_constrained_brachistochrone.html" class="md-nav__link">
        The Length-Constrained Brachistochrone
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/min_time_climb/min_time_climb.html" class="md-nav__link">
        Supersonic Interceptor Minimum Time Climb
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/multi_phase_cannonball/multi_phase_cannonball.html" class="md-nav__link">
        Multi-Phase Cannonball
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/multibranch_trajectory/multibranch_trajectory.html" class="md-nav__link">
        Multibranch Trajectory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/racecar/racecar.html" class="md-nav__link">
        Race car Lap Simulation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/reentry/reentry.html" class="md-nav__link">
        Single-Phase Space Shuttle Reentry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/ssto_earth/ssto_earth.html" class="md-nav__link">
        SSTO Earth Launch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/ssto_moon_linear_tangent/ssto_moon_linear_tangent.html" class="md-nav__link">
        SSTO Lunar Ascent with Linear Tangent Guidance
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/ssto_moon_polynomial_controls/ssto_moon_polynomial_controls.html" class="md-nav__link">
        SSTO Lunar Ascent with Polynomial Controls
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/water_rocket/water_rocket.html" class="md-nav__link">
        Water Rocket
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Feature Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Feature Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Feature Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      <label class="md-nav__link" for="__nav_5_1">
        Phases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Phases" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Phases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/phases/phases.html" class="md-nav__link">
        Phases of a Trajectory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/phases/segments.html" class="md-nav__link">
        Segments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/phases/variables.html" class="md-nav__link">
        Variables
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/phases/constraints.html" class="md-nav__link">
        Constraints
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/phases/objective.html" class="md-nav__link">
        Objective
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/phases/timeseries.html" class="md-nav__link">
        Timeseries Outputs
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      <label class="md-nav__link" for="__nav_5_2">
        Trajectories
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Trajectories" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Trajectories
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/trajectories/trajectories.html" class="md-nav__link">
        Organizing Phases into Trajectories
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/exploiting_sparsity.html" class="md-nav__link">
        Exploiting Sparsity for Faster Derivative Calculation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../features/plotting.html" class="md-nav__link">
        Plotting Timeseries
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Frequently Asked Questions
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Frequently Asked Questions" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Frequently Asked Questions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/add_ode_output_to_timeseries.html" class="md-nav__link">
        How do I add an ODE output to the timeseries outputs?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/connect_scalar_parameters_to_ode.html" class="md-nav__link">
        How do I connect a scalar input to the ODE?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/upstream_analysis.html" class="md-nav__link">
        How do connect the outputs of an upstream analysis as inputs to Dymos?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/downstream_analysis.html" class="md-nav__link">
        How do connect the outputs of Dymos to a downstream analysis?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/tandem_phases.html" class="md-nav__link">
        How do I run two phases parallel-in-time?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/use_partial_coloring.html" class="md-nav__link">
        How can I more efficiently use finite-differenced components in the ODE?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/debugging.html" class="md-nav__link">
        How can I debug models when things go wrong?
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Dymos API Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Dymos API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Dymos API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../api/run_problem.html" class="md-nav__link">
        The Dymos run_problem function
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../api/phase_api.html" class="md-nav__link">
        The Phase API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../api/trajectory_api.html" class="md-nav__link">
        The Trajectory API
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Whats New
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Whats New" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Whats New
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../release_notes/version_0.16.0.html" class="md-nav__link">
        dymos 0.16.0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../release_notes/version_0.17.0.html" class="md-nav__link">
        dymos 0.17.0
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Contributing
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contributing" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/contributing.html" class="md-nav__link">
        Contributing to Dymos
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-options" class="md-nav__link">
    System Options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables-of-the-optimal-control-problem" class="md-nav__link">
    Variables of the Optimal Control Problem
  </a>
  
    <nav class="md-nav" aria-label="Variables of the Optimal Control Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-for-time" class="md-nav__link">
    Options for Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#states" class="md-nav__link">
    States
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-for-states" class="md-nav__link">
    Options for States
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controls" class="md-nav__link">
    Controls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-for-control" class="md-nav__link">
    Options for Control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-for-parameters" class="md-nav__link">
    Options for Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tagging-variables" class="md-nav__link">
    Tagging Variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-target-detection" class="md-nav__link">
    Automatic target detection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vectorizing-the-ode" class="md-nav__link">
    Vectorizing the ODE
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dimensioned-inputs-and-outputs" class="md-nav__link">
    Dimensioned Inputs and Outputs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-vector-inputs" class="md-nav__link">
    Non-Vector Inputs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providing-the-ode-to-the-phase" class="md-nav__link">
    Providing the ODE to the Phase
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="defining-odes">Defining ODEs<a class="headerlink" href="#defining-odes" title="Permanent link">&para;</a></h1>
<p>Optimal control problems contain ordinary differential equations (ODE) or differential algebraic equations (DAE) that dictate the evolution of the state of the system.
Typically this evolution occurs in time, and the ODE represents equations of motion (EOM).
The equations of motion can define a variety of systems, not just mechanical ones.
In other fields they are sometimes referred to as <em>process equations</em>.</p>
<div>
<div class="MathJax_Preview">\begin{align}
    \dot{\bar{x}} = f_{ode}(\bar{x},t,\bar{u},\bar{d})
\end{align}</div>
<script type="math/tex; mode=display">\begin{align}
    \dot{\bar{x}} = f_{ode}(\bar{x},t,\bar{u},\bar{d})
\end{align}</script>
</div>
<p>To represent EOM, Dymos uses a standard OpenMDAO System (a Group or Component).
This System takes some set of variables as input and computes outputs that include the time-derivatives of the state variables <span><span class="MathJax_Preview">\bar{x}</span><script type="math/tex">\bar{x}</script></span>.
The ODE may also be a function of the current time <span><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>.</p>
<p>Finally, the dynamics may be subject to some set of controllable parameters.
In Dymos these are broken into the dynamic controls <span><span class="MathJax_Preview">\bar{u}</span><script type="math/tex">\bar{u}</script></span> and the static parameters <span><span class="MathJax_Preview">\bar{d}</span><script type="math/tex">\bar{d}</script></span>.</p>
<h2 id="system-options">System Options<a class="headerlink" href="#system-options" title="Permanent link">&para;</a></h2>
<p>ODE Systems in Dymos need provide values at numerous points in time we call nodes.
For performance reasons, it's best if it can do so using vectorized mathematical operations to compute the values simultaneously rather than using the loop to perform the calculation at each node.
Different optimal control transcriptions will need to have computed ODE values at different numbers of nodes, so each ODE system in Dymos is required to support the option <code>num_nodes</code>, which is defined in the <code>initialize</code> method.</p>
<p>ODE system may define initial options as well.
Since these options in OpenMDAO are typically provided as arguments to the instantiation of the ODE system, the user has the ability to provide additional input keyword arguments using the <code>ode_init_kwargs</code> option on Phase.</p>
<h2 id="variables-of-the-optimal-control-problem">Variables of the Optimal Control Problem<a class="headerlink" href="#variables-of-the-optimal-control-problem" title="Permanent link">&para;</a></h2>
<p>Dymos needs to know how state, time, and control variables are to be connected to the System, and needs to know which outputs to use as state time-derivatives.</p>
<h3 id="time">Time<a class="headerlink" href="#time" title="Permanent link">&para;</a></h3>
<p>The following time options can be set via the <code>set_time_options</code> method of Phase:</p>
<h3 id="options-for-time">Options for Time<a class="headerlink" href="#options-for-time" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Acceptable Values</th>
<th>Acceptable Types</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>duration_adder</td>
<td>N/A</td>
<td>N/A</td>
<td>['Number']</td>
<td>Adder for the duration of the integration variable across the phase.</td>
</tr>
<tr>
<td>duration_bounds</td>
<td>(None, None)</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>Tuple of (lower, upper) bounds for the duration of the integration variable across the phase.</td>
</tr>
<tr>
<td>duration_ref</td>
<td>N/A</td>
<td>N/A</td>
<td>['Number']</td>
<td>Unit-reference value for the duration of the integration variable across the phase.</td>
</tr>
<tr>
<td>duration_ref0</td>
<td>N/A</td>
<td>N/A</td>
<td>['Number']</td>
<td>Zero-reference value for the duration of the integration variable across the phase.</td>
</tr>
<tr>
<td>duration_scaler</td>
<td>N/A</td>
<td>N/A</td>
<td>['Number']</td>
<td>Scalar for the duration of the integration variable across the phase.</td>
</tr>
<tr>
<td>duration_val</td>
<td>1.0</td>
<td>N/A</td>
<td>['Number']</td>
<td>Value of the duration of the integration variable across the phase.</td>
</tr>
<tr>
<td>fix_duration</td>
<td>False</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If True, the  phase duration is not a design variable.</td>
</tr>
<tr>
<td>fix_initial</td>
<td>False</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If True, the initial value of time is not a design variable.</td>
</tr>
<tr>
<td>initial_adder</td>
<td>N/A</td>
<td>N/A</td>
<td>['Number']</td>
<td>Adder for the initial value of the integration variable.</td>
</tr>
<tr>
<td>initial_bounds</td>
<td>(None, None)</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>Tuple of (lower, upper) bounds for the integration variable at the start of the phase.</td>
</tr>
<tr>
<td>initial_ref</td>
<td>N/A</td>
<td>N/A</td>
<td>['Number']</td>
<td>Unit-reference value for the initial value of the integration variable.</td>
</tr>
<tr>
<td>initial_ref0</td>
<td>N/A</td>
<td>N/A</td>
<td>['Number']</td>
<td>Zero-reference value for the initial value of the integration variable.</td>
</tr>
<tr>
<td>initial_scaler</td>
<td>N/A</td>
<td>N/A</td>
<td>['Number']</td>
<td>Scalar for the initial value of the integration variable.</td>
</tr>
<tr>
<td>initial_val</td>
<td>0.0</td>
<td>N/A</td>
<td>['Number']</td>
<td>Value of the integration variable at the start of the phase.</td>
</tr>
<tr>
<td>input_duration</td>
<td>False</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If True, the phase duration (t_duration) is expected to be connected to an external output source.</td>
</tr>
<tr>
<td>input_initial</td>
<td>False</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If True, the initial value of time (t_initial) is expected to be connected to an external output source.</td>
</tr>
<tr>
<td>t_duration_targets</td>
<td>[]</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>targets in the ODE to which the total duration of the phase is connected</td>
</tr>
<tr>
<td>t_initial_targets</td>
<td>[]</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>targets in the ODE to which the initial time of the phase is connected</td>
</tr>
<tr>
<td>targets</td>
<td>[]</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>targets in the ODE to which the integration variable is connected</td>
</tr>
<tr>
<td>time_phase_targets</td>
<td>[]</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>targets in the ODE to which the elapsed duration of the phase is connected</td>
</tr>
<tr>
<td>units</td>
<td>s</td>
<td>N/A</td>
<td>['str']</td>
<td>Units for the integration variable</td>
</tr>
</tbody>
</table>
<h3 id="states">States<a class="headerlink" href="#states" title="Permanent link">&para;</a></h3>
<p>States have the following options set via the <code>add_state</code> and <code>set_state_options</code> methods of Phase:</p>
<h3 id="options-for-states">Options for States<a class="headerlink" href="#options-for-states" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Acceptable Values</th>
<th>Acceptable Types</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>adder</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Adder of the state variable at the discretization nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>connected_initial</td>
<td>False</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>Whether an input is created to pass in the initial state. This may be set by a trajectory that links phases.</td>
</tr>
<tr>
<td>continuity</td>
<td>True</td>
<td>N/A</td>
<td>['bool', 'dict']</td>
<td>Enforce continuity of state values at segment boundaries. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>defect_ref</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Unit-reference value of the state defects at the collocation nodes. This option is invalid if opt=False.  If provided, this option overrides defect_scaler. If defect_scaler and defect_ref are both None but the state scaler or ref are provided, use those values as the defect scaler or ref.</td>
</tr>
<tr>
<td>defect_scaler</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Scaler of the state variable defects at the collocation nodes. If defect_scaler and defect_ref are both None but the state scaler or ref are provided, use those values as the defect scaler or ref. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>desc</td>
<td></td>
<td>N/A</td>
<td>['str']</td>
<td>description of the state variable</td>
</tr>
<tr>
<td>final_bounds</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>Bounds on the value of the state at the end of the phase. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>fix_final</td>
<td>False</td>
<td>N/A</td>
<td>['bool', 'Iterable']</td>
<td>If True, the final value of this state is fixed and not a design variable. If the state variable has a non-scalar shape, this may be an iterable of bool for each index. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>fix_initial</td>
<td>False</td>
<td>N/A</td>
<td>['bool', 'Iterable']</td>
<td>If True, the initial value of this state is fixed and not a design variable. If the state variable has a non-scalar shape, this may be an iterable of bool for each index. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>initial_bounds</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>Bounds on the value of the state at the start of the phase. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>lower</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Lower bound of the state variable at the discretization nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>name</td>
<td><strong>Required</strong></td>
<td>N/A</td>
<td>['str']</td>
<td>name of ODE state variable</td>
</tr>
<tr>
<td>opt</td>
<td>True</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If true, the values of this state are a design variable for the optimizer.  Otherwise it exists as an unconnected input.</td>
</tr>
<tr>
<td>rate_source</td>
<td>N/A</td>
<td>N/A</td>
<td>['str']</td>
<td>ODE-path to the derivative of the state variable</td>
</tr>
<tr>
<td>ref</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Unit-reference value of the state variable at the discretization nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>ref0</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Zero-reference value of the state variable at the discretization nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>scaler</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Scaler of the state variable at the discretization nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>shape</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>shape of the state variable, as determined by introspection</td>
</tr>
<tr>
<td>solve_segments</td>
<td>N/A</td>
<td>[False, 'forward', 'backward']</td>
<td>N/A</td>
<td>If 'forward', collocation defects within eachsegment are solved with a Newton solver by fixing the initial value in thephase (if using compressed transcription) or segment (if not using compressed transcription). This provides a forward shooting (or multiple shooting)method.  If 'backward', the final value in the phase or segment is fixedand a solver finds the other ones to mimic reverse propagation. If None, (the default) use the value of solve_segments in the transcription. Set to False to explicitly disable the use of a solver to converge the statetime history.</td>
</tr>
<tr>
<td>targets</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>Targets in the ODE to which the state is connected</td>
</tr>
<tr>
<td>units</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>units in which the state variable is defined</td>
</tr>
<tr>
<td>upper</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Upper bound of the state variable at the discretization nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>val</td>
<td>1.0</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>Default value of the state variable at the discretization nodes</td>
</tr>
</tbody>
</table>
<h3 id="controls">Controls<a class="headerlink" href="#controls" title="Permanent link">&para;</a></h3>
<p>Inputs to the ODE which are to be dynamic controls are added via the <code>add_control</code> and <code>set_control_options</code> methods of Phase.
The available options are as follows:</p>
<h3 id="options-for-control">Options for Control<a class="headerlink" href="#options-for-control" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Acceptable Values</th>
<th>Acceptable Types</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>adder</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The adder of the control variable at the nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>continuity</td>
<td>True</td>
<td>N/A</td>
<td>['bool', 'dict']</td>
<td>Enforce continuity of control values at segment boundaries. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>desc</td>
<td></td>
<td>N/A</td>
<td>['str']</td>
<td>The description of the control variable.</td>
</tr>
<tr>
<td>fix_final</td>
<td>False</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If True, the final value of this control is fixed and not a design variable. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>fix_initial</td>
<td>False</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If True, the initial value of this control is fixed and not a design variable. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>lower</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The lower bound of the control variable at the nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>name</td>
<td><strong>Required</strong></td>
<td>N/A</td>
<td>['str']</td>
<td>The name of ODE system parameter to be controlled.</td>
</tr>
<tr>
<td>opt</td>
<td>True</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If True, the control value will be a design variable for the optimization problem.  If False, allow the control to be connected externally.</td>
</tr>
<tr>
<td>rate2_continuity</td>
<td>False</td>
<td>N/A</td>
<td>['bool', 'dict']</td>
<td>Enforce continuity of control second derivatives at segment boundaries. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>rate2_continuity_scaler</td>
<td>1.0</td>
<td>N/A</td>
<td>['Number']</td>
<td>Scaler of the dimensionless rate continuity constraint at segment boundaries. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>rate2_targets</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>The targets in the ODE to which the control 2nd derivative is connected</td>
</tr>
<tr>
<td>rate_continuity</td>
<td>True</td>
<td>N/A</td>
<td>['bool', 'dict']</td>
<td>Enforce continuity of control first derivatives in dimensionless time at segment boundaries. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>rate_continuity_scaler</td>
<td>1.0</td>
<td>N/A</td>
<td>['Number']</td>
<td>Scaler of the dimensionless rate continuity constraint at segment boundaries. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>rate_targets</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>The targets in the ODE to which the control rate is connected</td>
</tr>
<tr>
<td>ref</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The unit-reference value of the control variable at the nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>ref0</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The zero-reference value of the control variable at the nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>scaler</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The scaler of the control variable at the nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>shape</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable']</td>
<td>The shape of the control variable at each point in time.</td>
</tr>
<tr>
<td>targets</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>Targets in the ODE to which the state is connected</td>
</tr>
<tr>
<td>units</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>The units in which the control variable is defined.</td>
</tr>
<tr>
<td>upper</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The upper bound of the control variable at the nodes. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>val</td>
<td>[0.]</td>
<td>N/A</td>
<td>['Iterable', 'ndarray', 'Number']</td>
<td>The default value of the control variable at the control discretization nodes.</td>
</tr>
</tbody>
</table>
<h3 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h3>
<p>Inputs to the ODE which are non-time-varying can be specified using the <code>add_parameter</code> method of Phase.
Parameters may be used as design variables (by setting <code>opt = True</code>), or they may be connected to an output external to the Phase or Trajectory.
The available options are as follows:</p>
<h3 id="options-for-parameters">Options for Parameters<a class="headerlink" href="#options-for-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Acceptable Values</th>
<th>Acceptable Types</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>adder</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The adder of the parameter. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>desc</td>
<td></td>
<td>N/A</td>
<td>['str']</td>
<td>The description of the parameter.</td>
</tr>
<tr>
<td>dynamic</td>
<td>unspecified</td>
<td>[True, False, unspecified]</td>
<td>N/A</td>
<td>True if this parameter can be used as a dynamic control, else False.If _unspecified, attempt to determine through introspection.</td>
</tr>
<tr>
<td>include_timeseries</td>
<td>True</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>True if the static parameters should be included in output timeseries, else False</td>
</tr>
<tr>
<td>lower</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The lower bound of the parameter. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>name</td>
<td><strong>Required</strong></td>
<td>N/A</td>
<td>['str']</td>
<td>The name of ODE system parameter to be set via parameter.</td>
</tr>
<tr>
<td>opt</td>
<td>True</td>
<td>[True, False]</td>
<td>['bool']</td>
<td>If True, the control value will be a design variable for the optimization problem.  If False, allow the control to be connected externally.</td>
</tr>
<tr>
<td>ref</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The unit-reference value of the parameter. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>ref0</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The zero-reference value of the parameter. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>scaler</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The scaler of the parameter. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>shape</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>The shape of the parameter.</td>
</tr>
<tr>
<td>static_target</td>
<td>unspecified</td>
<td>[True, False, unspecified]</td>
<td>N/A</td>
<td>True if the target of this parameter does NOT have a unique value at each node in the ODE.If _unspecified, attempt to determine through introspection.</td>
</tr>
<tr>
<td>targets</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>Targets in the ODE to which the state is connected</td>
</tr>
<tr>
<td>units</td>
<td>unspecified</td>
<td>N/A</td>
<td>N/A</td>
<td>The units in which the parameter is defined.</td>
</tr>
<tr>
<td>upper</td>
<td>N/A</td>
<td>N/A</td>
<td>['Iterable', 'Number']</td>
<td>The upper bound of the parameter. This option is invalid if opt=False.</td>
</tr>
<tr>
<td>val</td>
<td>[0.]</td>
<td>N/A</td>
<td>['Iterable', 'ndarray', 'Number']</td>
<td>The default value of the parameter in the phase.</td>
</tr>
</tbody>
</table>
<p>By default, Dymos assumes that the ODE is defined such that a value of the parameter is provided at each node.
This makes it easier to define the partials for the ODE in a way such that some inputs may be used interchangeably as either controls or parameters.
If an ODE input is only to be used as a static variable (and not sized as <code>num_nodes</code> in the first dimension), then the user may specify option <code>static_target = True</code> to override this behavior.</p>
<h3 id="tagging-variables">Tagging Variables<a class="headerlink" href="#tagging-variables" title="Permanent link">&para;</a></h3>
<p>Dymos will also automatically find and add any states that have been declared in components in the ODE. The syntax
for declaring them is as follows.</p>
<div class="highlight"><pre><span></span><code>        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="s1">&#39;vdot&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nn</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;acceleration magnitude&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s**2&#39;</span><span class="p">,</span>
                        <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;dymos.state_rate_source:v&#39;</span><span class="p">,</span> <span class="s1">&#39;dymos.state_units:m/s&#39;</span><span class="p">])</span>
</code></pre></div>
<p>The state is defined by adding tags to the state rate's output.
The tag 'dymos.state_rate_source:v' declares that 'v' is the state for which this output ('vdot') is the rate source.
You can also optionally use a tag in the format 'dymos.state_units:m/s' to define units for that state.
If you need to set any other options, then use <code>set_state_options</code> at the phase level.</p>
<p>Inputs which are sized as 'static' in the ODE (the first dimension is <em>not</em> the number of nodes), must be made known to Dymos when using them as parameters.
This is normally accomplished with the 'static_target=True' option when calling add_parameter.
To avoid repetitive use of this option, users can add the tag 'dymos.static_target' to any input which should always be considered static.
When connecting to multiple targets, a 'dymos.static_target' tag on one of them will result in all of them being considered static.
Inputs tagged with 'dymos.static_target' cannot be used as controls or polynomial controls.</p>
<table>
<thead>
<tr>
<th>Tag</th>
<th>Applies to</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>dymos.state_rate_source:{state_name}</td>
<td>Outputs</td>
<td>Specifies that the tagged output provides the rate used to integrate the state of the given name.</td>
</tr>
<tr>
<td>dymos.state_units:{units}</td>
<td>Outputs</td>
<td>Specifies the default units to be used for the state whose rate is provided by the tagged output. May only be used on outputs also tagged with 'dymos.state_rate_source:{state_name}'.</td>
</tr>
<tr>
<td>dymos.static_target</td>
<td>Inputs</td>
<td>Specifies that the input is <em>not</em> shaped with num_nodes as the first dimension. This effects the way in which parameters are connected to the input. Inputs tagged with 'dymos.static_target' cannot be used as controls.</td>
</tr>
</tbody>
</table>
<h2 id="automatic-target-detection">Automatic target detection<a class="headerlink" href="#automatic-target-detection" title="Permanent link">&para;</a></h2>
<p>Dymos will attempt to automatically connect variables to targets in the same name if those targets
exist at the top-level of the ODE and have the same name as the state, control, parameter, or 'time'.</p>
<h2 id="vectorizing-the-ode">Vectorizing the ODE<a class="headerlink" href="#vectorizing-the-ode" title="Permanent link">&para;</a></h2>
<p>In addition to specifying the ODE Options, a system used as an ODE is required to have a metadata
entry called <code>num_nodes</code>.  When evaluating the dynamics, these systems will receive time, states,
controls, and other inputs as <em>vectorized</em> values, where item in the vector represents the variable
value at a discrete time in the trajectory.</p>
<p>The nodes are discretization or collocation locations in the polynomials which represent
each segment.  The number of nodes in a given phase (to be evaluated by the ODE system) is determined
by the number of segments in the phase and the polynomial order in each segment.  When Dymos instantiates
the ODE system it provides the total number of nodes at which evaluation is required to the ODE system.
Thus, at a minimum, the <code>initialize</code> method of components for an ODE system typically look something
like this:</p>
<p>The inputs and outputs of the system are expected to provide a scalar or dimensioned
value <em>at each node</em>.  Vectorization of the component via numpy adds a significant performance increase
compared to using a for loop to cycle through calculations at each node.  It's important to remember
that vectorized data is going to be coming in, this is especially important for defining partials.
From the perspective of the ODE system, the outputs at some time <code>t</code> only depend on the values
of the input variables at time <code>t</code>.  When the output variables are scalar at any given time, this
results in components whose Jacobian matrices are diagonal.  This large degree of sparsity leads
to computational advantages when using sparse-aware optimizers like SNOPT.  Users should declare
the partial derivatives of their components to be sparse (by specifying nonzero rows and columns)
whenever possible.</p>
<div class="highlight"><pre><span></span><code>    <span class="k">class</span> <span class="nc">MyODESystem</span><span class="p">(</span><span class="n">ExplicitComponent</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">declare</span><span class="p">(</span><span class="s1">&#39;num_nodes&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</code></pre></div>
<p>For example, if <code>MyODEComponent</code> is to compute the linear function <span><span class="MathJax_Preview">y = a * x + b</span><script type="math/tex">y = a * x + b</script></span> then the
setup, compute, and compute partials methods might look like this:</p>
<div class="highlight"><pre><span></span><code>    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;num_nodes&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">nn</span><span class="p">,),</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">nn</span><span class="p">,),</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;1/s&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">nn</span><span class="p">,),</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">nn</span><span class="p">,),</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s&#39;</span><span class="p">)</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">nn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declare_partials</span><span class="p">(</span><span class="n">of</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declare_partials</span><span class="p">(</span><span class="n">of</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declare_partials</span><span class="p">(</span><span class="n">of</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>

        <span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">compute_partials</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">partials</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>

        <span class="n">partials</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">partials</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
</code></pre></div>
<p>A few things to note here.  We can use the <code>shape</code> or <code>val</code> argument of <code>add_input</code> and <code>add_output</code>
to dimension each variable.  In this case each variable is assumed to be a scalar at each point in
time (each node).  We use the <code>rows</code> and <code>cols</code> arguments of <code>declare_partials</code> to provide the sparsity.
Here using <code>arange(nn)</code> for both gives us a diagonal jacobian with <code>nn</code> rows and <code>nn</code> columns.  Since
the number of nonzero values in the jacobian is <code>nn</code>, we only need to provide <code>nn</code> values in the
<code>compute_partials</code> method.  It will automatically fill them into the sparse jacobian matrix, in
row-major order.</p>
<p>In this example, the partial of <code>y</code> with respect to <code>b</code> is linear, so we can simply provide it in
the <code>declare_partials</code> call rather than reassigning it every time <code>compute_partials</code> is called.
The provided scalar value of <code>1.0</code> is broadcast to all <code>nn</code> values of the Jacobian matrix.</p>
<h2 id="dimensioned-inputs-and-outputs">Dimensioned Inputs and Outputs<a class="headerlink" href="#dimensioned-inputs-and-outputs" title="Permanent link">&para;</a></h2>
<p>The above example assumes all inputs and outputs are scalar at each node.  Sometimes the user may
encounter a situation in which the inputs and/or outputs are vectors, matrices, or tensors at
each node.  In this case the dimension of the variable is <code>num_nodes</code>, with the dimension of the
variable at a single node filling out the remaining indices. A 3-vector is thus dimensioned
<code>(num_nodes, 3)</code>, while a 3 x 3 matrix would be sized <code>(num_nodes, 3, 3)</code>.</p>
<h2 id="non-vector-inputs">Non-Vector Inputs<a class="headerlink" href="#non-vector-inputs" title="Permanent link">&para;</a></h2>
<p>Declaring inputs as vectors means that they have the potential to be used either as parameters or as dynamic controls which can assume a different value at each node.
For some quantities, such as gravitational acceleration in the Brachistochrone example, we can assume that the value will never need to be dynamic.
To accommodate this, parameters can be declared static with the argument <code>static_target=True</code>.
This prevents Dymos from "fanning out" the static value to the <em>n</em> nodes in the ODE system.</p>
<h2 id="providing-the-ode-to-the-phase">Providing the ODE to the Phase<a class="headerlink" href="#providing-the-ode-to-the-phase" title="Permanent link">&para;</a></h2>
<p>Phases in Dymos are instantiated with both the <code>ode_class</code> and the <code>transcription</code> to be used.
Internally, Dymos needs to instantiate the ODE multiple times.
This instantiation takes the form:</p>
<div class="highlight"><pre><span></span><code><span class="n">ode_instance</span> <span class="o">=</span> <span class="n">ode_class</span><span class="p">(</span><span class="n">num_nodes</span><span class="o">=&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">**</span><span class="n">ode_init_kwargs</span><span class="p">)</span>
</code></pre></div>
<p>This allows an OpenMDAO ExecComp to be used as an ODE via a lambda.
For instance, the brachistochrone ODE can be written as:</p>
<div class="highlight"><pre><span></span><code><span class="n">ode</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">num_nodes</span><span class="p">:</span> <span class="n">om</span><span class="o">.</span><span class="n">ExecComp</span><span class="p">([</span><span class="s1">&#39;vdot = g * cos(theta)&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;xdot = v * sin(theta)&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;ydot = -v * cos(theta)&#39;</span><span class="p">],</span>
                                    <span class="n">g</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mf">9.80665</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;m/s**2&#39;</span><span class="p">},</span>
                                    <span class="n">v</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;shape&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">num_nodes</span><span class="p">,),</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;m/s&#39;</span><span class="p">},</span>
                                    <span class="n">theta</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;shape&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">num_nodes</span><span class="p">,),</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;rad&#39;</span><span class="p">},</span>
                                    <span class="n">vdot</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;shape&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">num_nodes</span><span class="p">,),</span>
                                          <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;m/s**2&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;state_rate_source:v&#39;</span><span class="p">]},</span>
                                    <span class="n">xdot</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;shape&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">num_nodes</span><span class="p">,),</span>
                                          <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;m/s&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;state_rate_source:v&#39;</span><span class="p">]},</span>
                                    <span class="n">ydot</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;shape&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">num_nodes</span><span class="p">,),</span>
                                          <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;m/s&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;state_rate_source:v&#39;</span><span class="p">]},</span>
                                    <span class="n">has_diag_partials</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">phase</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">Phase</span><span class="p">(</span><span class="n">ode_class</span><span class="o">=</span><span class="n">ode</span><span class="p">,</span> <span class="n">transcription</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
</code></pre></div>
<p>Note the use of <code>has_diag_partials=True</code> to provide more efficient graph coloring for the derivatives.</p>
<p>In theory, this also means you can implement Python's <code>__call__</code> method for an ODE.
The following code will return a copy of the brachistochrone ODE with the appropriate number of nodes.
Note that the implementation below does not deal with any options provided via the <code>ode_init_kwargs</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CallableBrachistochroneODE</span><span class="p">(</span><span class="n">om</span><span class="o">.</span><span class="n">ExplicitComponent</span><span class="p">):</span>

   <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">declare</span><span class="p">(</span><span class="s1">&#39;num_nodes&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

   <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_nodes</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
       <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
       <span class="n">ret</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
       <span class="n">ret</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;num_nodes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_nodes</span>
       <span class="k">return</span> <span class="n">ret</span>

   <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="n">nn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;num_nodes&#39;</span><span class="p">]</span>

       <span class="c1"># Inputs</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nn</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;velocity&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s&#39;</span><span class="p">)</span>

       <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">9.80665</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;grav. acceleration&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s/s&#39;</span><span class="p">)</span>

       <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">nn</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;angle of wire&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;rad&#39;</span><span class="p">)</span>

       <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="s1">&#39;xdot&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nn</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;velocity component in x&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s&#39;</span><span class="p">,</span>
                       <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;state_rate_source:x&#39;</span><span class="p">,</span> <span class="s1">&#39;state_units:m&#39;</span><span class="p">])</span>

       <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="s1">&#39;ydot&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nn</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;velocity component in y&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s&#39;</span><span class="p">,</span>
                       <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;state_rate_source:y&#39;</span><span class="p">,</span> <span class="s1">&#39;state_units:m&#39;</span><span class="p">])</span>

       <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="s1">&#39;vdot&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nn</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;acceleration magnitude&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s**2&#39;</span><span class="p">,</span>
                       <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;state_rate_source:v&#39;</span><span class="p">,</span> <span class="s1">&#39;state_units:m/s&#39;</span><span class="p">])</span>

       <span class="bp">self</span><span class="o">.</span><span class="n">declare_partials</span><span class="p">(</span><span class="n">of</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;cs&#39;</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">declare_coloring</span><span class="p">(</span><span class="n">wrt</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">1.0E-12</span><span class="p">)</span>
</code></pre></div>
<p>An instance of the above ODE can then be provided to the phase upon instantiation.</p>
<div class="highlight"><pre><span></span><code><span class="n">ode</span> <span class="o">=</span> <span class="n">CallableBrachistochroneODE</span><span class="p">(</span><span class="n">num_nodes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">phase</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">Phase</span><span class="p">(</span><span class="n">ode_class</span><span class="o">=</span><span class="n">ode</span><span class="p">,</span> <span class="n">transcription</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
</code></pre></div>
<p>This can potentially lead to unintended behavior if multiple copeis of the ODE are intended to share data.
See <a href="https://docs.python.org/3/library/copy.html">the Python docs</a> for some of the limitations of deepcopy.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="optimal_control.html" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Optimal Control
            </div>
          </div>
        </a>
      
      
        <a href="intro_to_dymos/intro_ivp.html" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Modeling Dynamic Systems with Dymos
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.4fa0e4ee.min.js", "version": {"method": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1d3bfcf1.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>