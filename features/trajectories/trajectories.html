
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.4">
    
    
      
        <title>Organizing Phases into Trajectories - Dymos</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#organizing-phases-into-trajectories" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Dymos" class="md-header__button md-logo" aria-label="Dymos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dymos
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Organizing Phases into Trajectories
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Dymos" class="md-nav__button md-logo" aria-label="Dymos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Dymos
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../installation.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/collocation.html" class="md-nav__link">
        What is collocation?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/optimal_control.html" class="md-nav__link">
        Optimal Control
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/defining_odes.html" class="md-nav__link">
        Defining ODEs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/intro_to_dymos/intro_ivp.html" class="md-nav__link">
        Modeling Dynamic Systems with Dymos
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/intro_to_dymos/intro_segments.html" class="md-nav__link">
        Segments of Phases
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Examples and Tutorials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Examples and Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Examples and Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples.html" class="md-nav__link">
        Dymos by Example
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        Example Problems
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Example Problems" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Example Problems
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/brachistochrone/brachistochrone.html" class="md-nav__link">
        The Brachistochrone
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/vanderpol/vanderpol.html" class="md-nav__link">
        The Van der Pol Oscillator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/balanced_field/balanced_field.html" class="md-nav__link">
        Aircraft Balanced Field Length Calculation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/commercial_aircraft/commercial_aircraft.html" class="md-nav__link">
        Commercial Aircraft Range Maximization by Differential Inclusion
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/double_integrator/double_integrator.html" class="md-nav__link">
        Double Integrator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/hypersensitive/hypersensitive.html" class="md-nav__link">
        Hyper-Sensitive Problem
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/finite_burn_orbit_raise/finite_burn_orbit_raise.html" class="md-nav__link">
        Two-Burn Orbit Raise
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/length_constrained_brachistochrone/length_constrained_brachistochrone.html" class="md-nav__link">
        The Length-Constrained Brachistochrone
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/min_time_climb/min_time_climb.html" class="md-nav__link">
        Supersonic Interceptor Minimum Time Climb
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/multi_phase_cannonball/multi_phase_cannonball.html" class="md-nav__link">
        Multi-Phase Cannonball
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/multibranch_trajectory/multibranch_trajectory.html" class="md-nav__link">
        Multibranch Trajectory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/racecar/racecar.html" class="md-nav__link">
        Race car Lap Simulation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/reentry/reentry.html" class="md-nav__link">
        Single-Phase Space Shuttle Reentry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/ssto_earth/ssto_earth.html" class="md-nav__link">
        SSTO Earth Launch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/ssto_moon_linear_tangent/ssto_moon_linear_tangent.html" class="md-nav__link">
        SSTO Lunar Ascent with Linear Tangent Guidance
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/ssto_moon_polynomial_controls/ssto_moon_polynomial_controls.html" class="md-nav__link">
        SSTO Lunar Ascent with Polynomial Controls
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/water_rocket/water_rocket.html" class="md-nav__link">
        Water Rocket
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        Feature Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Feature Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Feature Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      <label class="md-nav__link" for="__nav_5_1">
        Phases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Phases" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Phases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../phases/phases.html" class="md-nav__link">
        Phases of a Trajectory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../phases/segments.html" class="md-nav__link">
        Segments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../phases/variables.html" class="md-nav__link">
        Variables
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../phases/constraints.html" class="md-nav__link">
        Constraints
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../phases/objective.html" class="md-nav__link">
        Objective
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../phases/timeseries.html" class="md-nav__link">
        Timeseries Outputs
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" checked>
      
      <label class="md-nav__link" for="__nav_5_2">
        Trajectories
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Trajectories" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Trajectories
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Organizing Phases into Trajectories
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="trajectories.html" class="md-nav__link md-nav__link--active">
        Organizing Phases into Trajectories
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instantiating-a-trajectory" class="md-nav__link">
    Instantiating a Trajectory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-phases" class="md-nav__link">
    Adding Phases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-phase-linkages" class="md-nav__link">
    Defining Phase Linkages
  </a>
  
    <nav class="md-nav" aria-label="Defining Phase Linkages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_linkage_constraint" class="md-nav__link">
    add_linkage_constraint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link_phases" class="md-nav__link">
    link_phases
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples-of-using-the-link_phases-method" class="md-nav__link">
    Examples of using the link_phases method
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trajectory-level-parameters" class="md-nav__link">
    Trajectory-Level Parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#explicit-simulation-of-trajectories" class="md-nav__link">
    Explicit Simulation of Trajectories
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../exploiting_sparsity.html" class="md-nav__link">
        Exploiting Sparsity for Faster Derivative Calculation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../plotting.html" class="md-nav__link">
        Plotting Timeseries
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Frequently Asked Questions
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Frequently Asked Questions" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Frequently Asked Questions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/add_ode_output_to_timeseries.html" class="md-nav__link">
        How do I add an ODE output to the timeseries outputs?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/connect_scalar_parameters_to_ode.html" class="md-nav__link">
        How do I connect a scalar input to the ODE?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/upstream_analysis.html" class="md-nav__link">
        How do connect the outputs of an upstream analysis as inputs to Dymos?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/downstream_analysis.html" class="md-nav__link">
        How do connect the outputs of Dymos to a downstream analysis?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/tandem_phases.html" class="md-nav__link">
        How do I run two phases parallel-in-time?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/use_partial_coloring.html" class="md-nav__link">
        How can I more efficiently use finite-differenced components in the ODE?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/debugging.html" class="md-nav__link">
        How can I debug models when things go wrong?
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Dymos API Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Dymos API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Dymos API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/run_problem.html" class="md-nav__link">
        The Dymos run_problem function
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/phase_api.html" class="md-nav__link">
        The Phase API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/trajectory_api.html" class="md-nav__link">
        The Trajectory API
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Whats New
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Whats New" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Whats New
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/version_0.16.0.html" class="md-nav__link">
        dymos 0.16.0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/version_0.17.0.html" class="md-nav__link">
        dymos 0.17.0
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Contributing
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contributing" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/contributing.html" class="md-nav__link">
        Contributing to Dymos
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instantiating-a-trajectory" class="md-nav__link">
    Instantiating a Trajectory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-phases" class="md-nav__link">
    Adding Phases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-phase-linkages" class="md-nav__link">
    Defining Phase Linkages
  </a>
  
    <nav class="md-nav" aria-label="Defining Phase Linkages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_linkage_constraint" class="md-nav__link">
    add_linkage_constraint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link_phases" class="md-nav__link">
    link_phases
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples-of-using-the-link_phases-method" class="md-nav__link">
    Examples of using the link_phases method
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trajectory-level-parameters" class="md-nav__link">
    Trajectory-Level Parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#explicit-simulation-of-trajectories" class="md-nav__link">
    Explicit Simulation of Trajectories
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="organizing-phases-into-trajectories">Organizing Phases into Trajectories<a class="headerlink" href="#organizing-phases-into-trajectories" title="Permanent link">&para;</a></h1>
<p>The majority of real-world use cases of optimal control involve complex trajectories that cannot be modeled with a single phase.
For instance, different phases of a trajectory may have different equations of motion, different control parameterizations, or different path constraints.
Phases are also necessary if the user wishes to impose intermediate constraints upon some variable, by imposing them as boundary constraints at a phase junction.</p>
<p>The <em>Trajectory</em> class in Dymos is intended to simplify the development of multi-phase problems.
It serves as a Group which contains the various phases belonging to the trajectory, and it provides linkage constraints that dictate how phases are linked together.
This enables trajectories that are not only a sequence of phases in time, but may include branching behavior, allowing us to do things like track/constrain the path of a jettisoned rocket stage.</p>
<p>It supports a <code>get_values</code> method similar to that of Phases that allows the user to retrieve the value of a variable within the trajectory.
When verifying an answer with explicit simulation, the <code>simulate</code> method of Trajectory can simulate all of its member phases in parallel, providing a significant performance improvement for some cases.</p>
<h2 id="instantiating-a-trajectory">Instantiating a Trajectory<a class="headerlink" href="#instantiating-a-trajectory" title="Permanent link">&para;</a></h2>
<p>Instantiating a Trajectory is simple.  Simply invoke <code>Trajectory()</code>.  The trajectory object
itself is an OpenMDAO <code>Group</code> which serves as a container for its constituent Phases.</p>
<ul>
<li>phases
    An OpenMDAO <code>Group</code> or <code>ParallelGroup</code> holding the member phases</li>
<li>linkages
    A Dymos <code>PhaseLinkageComp</code> that manages all of the linkage constraints that dictate how the phases are connected.</li>
</ul>
<h2 id="adding-phases">Adding Phases<a class="headerlink" href="#adding-phases" title="Permanent link">&para;</a></h2>
<p>Phases are added to a Trajectory using the <code>add_phase</code> method.</p>
<div class="admonition abstract">
<p class="admonition-title">dymos.Trajectory.add_phase</p>
<p><strong>add_phase(self, name, phase, </strong>kwargs)**</p>
<p>Add a phase to the trajectory.</p>
<p>Phases will be added to the Trajectory's <code>phases</code> subgroup.</p>
<p><strong>Arguments:</strong></p>
<p><strong>name</strong>: The name of the phase being added.</p>
<p><strong>phase</strong>: The Phase object to be added.</p>
<p><strong>**kwargs</strong>: Additional arguments when adding the phase to the trajectory.</p>
</div>
<h2 id="defining-phase-linkages">Defining Phase Linkages<a class="headerlink" href="#defining-phase-linkages" title="Permanent link">&para;</a></h2>
<p>Having added phases to the Trajectory, they now exist as independent Groups within the OpenMDAO model.
In order to enforce continuity among certain variables across phases, the user must declare which variables are to be continuous in value at each phase boundary.
There are two methods in dymos which provide this functionality.
The <code>add_linkage_constraint</code> method provides a very general way of coupling two phases together.
It does so by generating a constraint of the following form:</p>
<div>
<div class="MathJax_Preview">\begin{align}
    c = \mathrm{sign}_a \mathrm{var}_a + \mathrm{sign}_b \mathrm{var}_b
\end{align}</div>
<script type="math/tex; mode=display">\begin{align}
    c = \mathrm{sign}_a \mathrm{var}_a + \mathrm{sign}_b \mathrm{var}_b
\end{align}</script>
</div>
<p>Method <code>add_linkage_constraint</code> lets the user specify the variables and phases to be compared for this constraint, as well as the location of the variable in each phase (either 'initial' or 'final')
By default this method is setup to provide continuity in a variable between two phases:
- the sign of variable <code>a</code> is +1 while the sign of variable <code>b</code> is -1.
- the location of variable <code>a</code> is 'final' while the location of variable <code>b</code> is 'initial'.
- the default value of the constrained quantity is 0.0.</p>
<p>In this way, the default behavior constrains the final value of some variable in phase <code>a</code> to be the same as the initial value of some variable in phase <code>b</code>.
Other values for these options can provide other functionality.
For instance, to simulate a mass jettison, we could require that the initial value of <code>mass</code> in phase <code>b</code> be 1000 kg less than the value of mass at the end of phase <code>a</code>.
Providing arguments <code>equals = 1000, units='kg</code> would achieve this.</p>
<p>Similarly, specifying other values for the locations of the variables in each phase can be used to ensure that two phases start or end at the same condition - such as the case in a branching trajectory or a rendezvous.</p>
<p>While <code>add_linkage_constraint</code> gives the user a powerful capability, providing simple state and time continuity across multiple phases would be a very verbose undertaking using this method.
The <code>link_phases</code> method is intended to simplify this process.
In the finite-burn orbit raising example, there are three phases:  <code>burn1</code>, <code>coast</code>, <code>burn2</code>.
This case is somewhat unusual in that the thrust acceleration is modeled as a state variable.<br />
The acceleration needs to be zero in the coast phase, but continuous between <code>burn1</code> and <code>burn2</code>, assuming no mass was jettisoned during the coast and that the thrust magnitude doesn't change.</p>
<h3 id="add_linkage_constraint">add_linkage_constraint<a class="headerlink" href="#add_linkage_constraint" title="Permanent link">&para;</a></h3>
<div class="admonition abstract">
<p class="admonition-title">dymos.Trajectory.add_linkage_constraint</p>
<p><strong>add_linkage_constraint(self, phase_a, phase_b, var_a, var_b, loc_a='final', loc_b='initial', sign_a=1.0, sign_b=-1.0, units=unspecified, lower=None, upper=None, equals=None, scaler=None, adder=None, ref0=None, ref=None, linear=False, connected=False)</strong></p>
<p>Explicitly add a single phase linkage constraint.</p>
<p>Phase linkage constraints are enforced by constraining the following equation:</p>
<p>sign_a * var_a + sign_b * var_b</p>
<p>The resulting value of this equation is constrained.  This can satisfy 'coupling' or
'linkage' conditions across phase boundaries:  enforcing continuity,
common initial conditions, or common final conditions.</p>
<p>With default values, this equation can be used to enforce variable continuity at phase
boundaries.  For instance, constraining some variable <code>x</code> (either a state, control,
parameter, or output of the ODE) to have the same value at the final point of phase 'foo'
and the initial point of phase 'bar' is accomplished by:</p>
<div class="highlight"><pre><span></span><code>add_linkage_constraint(&#39;foo&#39;, &#39;bar&#39;, &#39;x&#39;, &#39;x&#39;)
</code></pre></div>
<p>We may sometimes want two phases to have the same value of some variable at the start of
each phase:</p>
<div class="highlight"><pre><span></span><code>add_linkage_constraint(&#39;foo&#39;, &#39;bar&#39;, &#39;x&#39;, &#39;x&#39;, loc_a=&#39;initial&#39;, loc_b=&#39;initial&#39;)
</code></pre></div>
<p>(Here the specification of loc_b is unnecessary but helps in the clarity of whats going on.)</p>
<p>Or perhaps a phase has cyclic behavior.  We may not know the exact value of some variable
<code>x</code> at the start and end of the phase <code>foo</code>, but it must be the same value at each point.</p>
<div class="highlight"><pre><span></span><code>add_linkage_constraint(&#39;foo&#39;, &#39;foo&#39;, &#39;x&#39;, &#39;x&#39;)
</code></pre></div>
<p>If <code>lower</code>, <code>upper</code>, and <code>equals</code> are all <code>None</code>, then dymos will use <code>equals=0</code> by default.
If the continuity condition is limited by some bounds instead, lower and upper can be used.
For instance, perhaps the velocity ('vel') is allowed to have an impulsive change within
a certain magnitude between two phases:</p>
<div class="highlight"><pre><span></span><code>add_linkage_constraint(&#39;foo&#39;, &#39;bar&#39;, &#39;vel&#39;, &#39;vel&#39;, lower=-100, upper=100, units=&#39;m/s&#39;)
</code></pre></div>
<p><strong>Arguments:</strong></p>
<p><strong>phase_a</strong>: The first phase in the linkage constraint.</p>
<p><strong>phase_b</strong>: The second phase in the linkage constraint.</p>
<p><strong>var_a</strong>: The linked variable from the first phase in the linkage constraint.</p>
<p><strong>var_b</strong>: The linked variable from the second phase in the linkage constraint.</p>
<p><strong>loc_a</strong>: The location of the variable in the first phase of the linkage constraint (one of 'initial' or 'final').</p>
<p><strong>loc_b</strong>: The location of the variable in the second phase of the linkage constraint (one of 'initial' or 'final').</p>
<p><strong>sign_a</strong>: The sign applied to the variable from the first phase in the linkage constraint.</p>
<p><strong>sign_b</strong>: The sign applied to the variable from the second phase in the linkage constraint.</p>
<p><strong>units</strong>: Units of the linkage.  If _unspecified, dymos will use the units from the variable in the first phase of the linkage.  Units of the two specified variables must be compatible.</p>
<p><strong>lower</strong>: The lower bound applied as a constraint on the linkage equation.</p>
<p><strong>upper</strong>: The upper bound applied as a constraint on the linkage equation.</p>
<p><strong>equals</strong>: Specifies a targeted value for an equality constraint on the linkage equation.</p>
<p><strong>scaler</strong>: The scaler of the linkage constraint.</p>
<p><strong>adder</strong>: The adder of the linkage constraint.</p>
<p><strong>ref0</strong>: The zero-reference value of the linkage constraint.</p>
<p><strong>ref</strong>: The unit-reference value of the linkage constraint.</p>
<p><strong>linear</strong>: If True, treat this variable as a linear constraint, otherwise False.  Linear constraints should only be applied if the variable on each end of the linkage is a design variable or a linear function of one.</p>
<p><strong>connected</strong>: If True, this constraint is enforced by direct connection rather than a constraint for the optimizer.  This is only valid for states and time.</p>
</div>
<h3 id="link_phases">link_phases<a class="headerlink" href="#link_phases" title="Permanent link">&para;</a></h3>
<div class="admonition abstract">
<p class="admonition-title">dymos.Trajectory.link_phases</p>
<p><strong>link_phases(self, phases, vars=None, locs=('final', 'initial'), connected=False)</strong></p>
<p>Specify that phases in the given sequence are to be assume continuity of the given variables.</p>
<p>This method caches the phase linkages, and may be called multiple times to express more
complex behavior (branching phases, phases only continuous in some variables, etc).</p>
<p>The location at which the variables should be coupled in the two phases are provided
with one of two strings:</p>
<ul>
<li>'final' specifies the value at the end of the phase (at time t_initial + t_duration)</li>
<li>'initial' specifies the value at the start of the phase (at time t_initial)</li>
</ul>
<p><strong>Arguments:</strong></p>
<p><strong>phases</strong>: The names of the phases in this trajectory to be sequentially linked.</p>
<p><strong>vars</strong>: The variables in the phases to be linked, or '<em>'.  Providing '</em>' will time and all states.  Linking control values or rates requires them to be listed explicitly.</p>
<p><strong>locs</strong>: A two-element tuple of a location specification.  For every pair in phases, the location specification refers to which location in the first phase is connected to which location in the second phase.  If the user wishes to specify different locations for different phase pairings, those phase pairings must be made in separate calls to link_phases.</p>
<p><strong>connected</strong>: Set to True to directly connect the phases being linked. Otherwise, create constraints for the optimizer to solve.</p>
</div>
<h2 id="examples-of-using-the-link_phases-method">Examples of using the <code>link_phases</code> method<a class="headerlink" href="#examples-of-using-the-link_phases-method" title="Permanent link">&para;</a></h2>
<p><strong>Typical Phase Linkage Sequence</strong></p>
<p>A typical phase linkage sequence, where all phases use the same ODE (and therefore have
the same states), are simply linked sequentially in time.</p>
<div class="highlight"><pre><span></span><code><span class="n">t</span><span class="o">.</span><span class="n">link_phases</span><span class="p">([</span><span class="s1">&#39;phase1&#39;</span><span class="p">,</span> <span class="s1">&#39;phase2&#39;</span><span class="p">,</span> <span class="s1">&#39;phase3&#39;</span><span class="p">])</span>
</code></pre></div>
<p><strong>Adding an Additional Linkage</strong></p>
<p>If the user wants some control variable, <code>u</code>, to be continuous in value between <code>phase2</code> and
<code>phase3</code> only, they could indicate that with the following code:</p>
<div class="highlight"><pre><span></span><code><span class="n">t</span><span class="o">.</span><span class="n">link_phases</span><span class="p">([</span><span class="s1">&#39;phase2&#39;</span><span class="p">,</span> <span class="s1">&#39;phase3&#39;</span><span class="p">],</span> <span class="nb">vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">])</span>
</code></pre></div>
<p><strong>Branching Trajectories</strong></p>
<p>For a more complex example, consider the case where there are two phases which branch off
from the same point, such as the case of a jettisoned stage.  The nominal trajectory
consists of the phase sequence <code>['a', 'b', 'c']</code>.  Let phase <code>['d']</code> be the phase that tracks
the jettisoned component to its impact with the ground.  The linkages in this case
would be defined as:</p>
<div class="highlight"><pre><span></span><code><span class="n">t</span><span class="o">.</span><span class="n">link_phases</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="n">t</span><span class="o">.</span><span class="n">link_phases</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>
</code></pre></div>
<p><strong>Specifying Linkage Locations</strong></p>
<p>Phase linkages assume that, for each pair, the state/control values at the end (<code>'final'</code>)
of the first phase are linked to the state/control values at the start of the second phase
(<code>'initial'</code>).</p>
<p>The user can override this behavior, but they must specify a pair of location strings for
each pair given in <code>phases</code>.  For instance, in the following example phases <code>a</code> and <code>b</code>
have the same initial time and state, but phase <code>c</code> follows phase <code>b</code>.  Note since there
are three phases provided, there are two linkages and thus two pairs of location
specifiers given.</p>
<div class="highlight"><pre><span></span><code><span class="n">t</span><span class="o">.</span><span class="n">link_phases</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">locs</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;initial&#39;</span><span class="p">,</span> <span class="s1">&#39;initial&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;final&#39;</span><span class="p">,</span> <span class="s1">&#39;initial&#39;</span><span class="p">)])</span>
</code></pre></div>
<h2 id="trajectory-level-parameters">Trajectory-Level Parameters<a class="headerlink" href="#trajectory-level-parameters" title="Permanent link">&para;</a></h2>
<p>Often times, there are parameters which apply to the entirety of a trajectory that potentially need to be optimized.
If we implemented these as parameters within each phase individually, we would need some constraints to ensure that they held the same value within each phase.
To avoid this complexity, Dymos Trajectory objects support their own Parameters.</p>
<p>Like their Phase-based counterparts, Trajectory parameters produce may be design variables for the problem or used as inputs to the trajectory from external sources.</p>
<p>When using Trajectory parameters, their values are connected to each phase as an Input Parameter within the Phase.
Because ODEs in different phases may have different names for parameters (e.g. 'mass', 'm', 'm_total', etc) Dymos allows the user to specify the targeted ODE parameters on a phase-by-phase basis using the <code>targets</code> and <code>target_params</code> option.
It can take on the following values.</p>
<ul>
<li>
<p>If <code>targets</code> is <code>None</code> the trajectory parameter will be connected to the phase input parameter of the same name in each phase, if it exists (otherwise it is not connected to that phase).</p>
</li>
<li>
<p>Otherwise targets should be specified as a dictionary. And the behavior depends on the value associated with each phase name:</p>
<ul>
<li>
<p>If the phase name is not in the given dictionary, attempt to connect to an existing parameter of the same name in that phase.</p>
</li>
<li>
<p>If the associated value is None, explicitly omit a connection to that phase.</p>
</li>
<li>
<p>If the associated value is a string, connect to an existing input parameter whose name is given by the string in that phase.</p>
</li>
<li>
<p>If the associated value is a Sequence, create an input parameter in that phase connected to the ODE targets given by the Sequence.</p>
</li>
</ul>
</li>
</ul>
<h2 id="explicit-simulation-of-trajectories">Explicit Simulation of Trajectories<a class="headerlink" href="#explicit-simulation-of-trajectories" title="Permanent link">&para;</a></h2>
<p>The <code>simulate</code> method on Trajectory is similar to that of the <code>simulate</code> method of Phases.  When
invoked, it will perform a simulation of each Phase in the trajectory.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../phases/timeseries.html" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Timeseries Outputs
            </div>
          </div>
        </a>
      
      
        <a href="../exploiting_sparsity.html" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Exploiting Sparsity for Faster Derivative Calculation
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.4fa0e4ee.min.js", "version": {"method": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1d3bfcf1.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>